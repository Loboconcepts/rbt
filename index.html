<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Robot</title>
	<style type="text/css">
		.food {
			width: 10px;
			height: 10px;
			background-color: #000000;
			position: absolute;
			z-index: 100;
			border-radius:30%;
		}
		#pet {
			width:30px;
			height: 30px;
			border-radius:100%;
			background-color: #FF00FF;
			position: absolute;
			z-index: 1000;
		}
		.speak::after {
			position: absolute;
			content: attr(data-txt);
			left:35px;
			opacity: 100;
			font-family: Arial,Helvetica,'sans-serif';
			background-color: #ffffff;
			border-radius:10px;
			padding:3px;
			font-size:11px;
		}
	</style>
</head>
<body onresize="resizeField()" style="margin: 0px;">

	<div data-txt="hey!" id="pet" style="left: 20px;top: 20px;"></div>

	<div id="window" style="background-color:#85c2ba;margin:10px;">

		<div id="anchor">
		</div>
	</div>



	<script type="text/javascript">
		var bored = 0;
		var happiness = 0;
		document.getElementById("window").style.width = (window.innerWidth - 20) + "px";
		document.getElementById("window").style.height = (window.innerHeight - 20) + "px";

		// talk function
		function speak(sayWhat) {
			document.getElementById("pet").dataset.txt = sayWhat;
			document.querySelector('#pet').classList.add("speak");
			function removeWord() {document.querySelector('#pet').classList.remove("speak");}
			setTimeout(removeWord, ((sayWhat.length * 100) + 600));
		}

		// resize the field
		function resizeField() {
			document.getElementById("window").style.width = (window.innerWidth - 20) + "px";
			document.getElementById("window").style.height = (window.innerHeight - 20) + "px";
		}
		function generateCoordinates(ev) {
			var x = event.clientX;
    		var y = event.clientY;
    		dropFood(x, y);
    		clearInterval(thinkNow);
    		thinkNow = window.setInterval(ifFoodExists, 24);
		}

		function ifFoodExists() {
			if (document.querySelector(".food")) {
				bored = 0;
				thinkAboutEating();

			}
			else {
				return
			}
		}

		function dropFood(xCor, yCor) {
			var newFood = document.createElement("div");
			newFood.setAttribute("class","food");
			newFood.style.left = xCor + "px";
			newFood.style.top = yCor + "px";
			var currentDiv = document.getElementById("anchor");
  			document.getElementById("window").insertBefore(newFood, currentDiv);
		}
		function thinkAboutEating() {
			var foodPositionLeft = parseInt((document.querySelector(".food").style.left).replace("px",""),10);
			var foodPositionTop = parseInt((document.querySelector(".food").style.top).replace("px",""),10);
			var petPositionLeft = parseInt((document.querySelector("#pet").style.left).replace("px",""),10);
			var petPositionTop = parseInt((document.querySelector("#pet").style.top).replace("px",""),10);
			var distanceToFoodLeft = foodPositionLeft - petPositionLeft;
			var distanceToFoodTop = foodPositionTop - petPositionTop;
			if ((distanceToFoodLeft <= 30 && distanceToFoodLeft > -6) && (distanceToFoodTop <= 30 && distanceToFoodTop > -6))  {
				document.querySelector(".food").remove();
				window.performance.memory
				speak("yum!");
				
			    
			}
			else {
				if (petPositionLeft < foodPositionLeft) {
					petPositionLeft = petPositionLeft + Math.floor(foodPositionLeft/petPositionLeft);
					document.querySelector("#pet").style.left = petPositionLeft + "px";
				}
				if (petPositionTop < foodPositionTop) {
					petPositionTop = petPositionTop + Math.floor(foodPositionTop/petPositionTop);
					document.querySelector("#pet").style.top = petPositionTop + "px";
				}
				if (petPositionLeft > foodPositionLeft) {
					petPositionLeft = petPositionLeft - Math.floor(petPositionLeft/foodPositionLeft);
					document.querySelector("#pet").style.left = petPositionLeft + "px";
				}
				if (petPositionTop > foodPositionTop) {
					petPositionTop = petPositionTop - Math.floor(petPositionTop/foodPositionTop);
					document.querySelector("#pet").style.top = petPositionTop + "px";
				}
			}
		}

		function amBored() {
			bored = bored + 1
			if (bored == 5) {
				speak("RAWR");
				bored = 3;
			}
		}

		function petted() {
			speak("prrrrrrr");
			happiness = happiness + 1;
			bored = 0
		}

		document.getElementById("window").onclick = generateCoordinates;
		document.getElementById("pet").onclick = petted;

				// Thinking twice a second
		var thinkNow = window.setInterval(amBored, 5000);

			// 42
		
	</script>

</body>
</html>
